import base64
exec(base64.b64decode('aW1wb3J0IGFpb2h0dHAKaW1wb3J0IGJhc2U2NApmcm9tIHB5cm9ncmFtIGltcG9ydCBlbnVtcwpmcm9tIHVzZXJnZSBpbXBvcnQgdXNlcmdlLCBNZXNzYWdlCmltcG9ydCB0aW1lLCBvcywgbWF0aCwgcmVxdWVzdHMsIHJlLCBqc29uCmltcG9ydCBkYXRldGltZSBhcyBEVAppbXBvcnQgcmVxdWVzdHMgYXMgcmVxCmZyb20gcHlyb2dyYW0gaW1wb3J0IENsaWVudCwgZmlsdGVycwoKCmhlYWRlciA9IHsiQVVUSF9LRVkiOiJtZWtpIn0KCgpAdXNlcmdlLm9uX2NtZCgKICAgICJzc2hfZG8xIiwgYWJvdXQ9ewogICAgICAgICdoZWFkZXInOiAiQ3JlYXRlIFNTSCBBY2NvdW50IiwKICAgICAgICAnZGVzY3JpcHRpb24nOiAia2VnYWJ1dGFuIHlnIGhhcWlxaSIsCiAgICAgICAgJ3VzYWdlJzogInt0cn1zc2hfZG8xIFt1c2VyXTpbcHddOltleHBdIn0pCmFzeW5jIGRlZiBzc2gobWVzc2FnZTogTWVzc2FnZSk6CiAgICAiIiJTU0ggYWNjb3VudCIiIgogICAgcmVwbGllZCA9IG1lc3NhZ2UuaW5wdXRfc3RyIAogICAgaWYgbm90IHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgSkdOIEtPU09ORyBCTE9LIWAiKQogICAgICAgIHJldHVybgogICAgaWYgIjoiIG5vdCBpbiByZXBsaWVkOgogICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFVTRVI6UFc6RVhQICFgIikKICAgICAgICByZXR1cm4KICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFR1bmdndSBCbG9nICFgIikKICAgIGFzeW5jIHdpdGggYWlvaHR0cC5DbGllbnRTZXNzaW9uKCkgYXMgcmVxOgogICAgICAgIHUgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVswXQogICAgICAgIHAgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVsxXQogICAgICAgIGUgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVsyXQogICAgICAgIGRvbWFpbiA9IGYiZG8xLmRlbmthYXJhLm1lIgogICAgICAgIHBhcmFtID0gZiI6Njk2OS9hZGR1c2VyL2V4cD8/dXNlcj17dX0mcGFzc3dvcmQ9e3B9JmV4cD17ZX0iCiAgICAgICAgdXJsID0gKCJodHRwOi8vIitkb21haW4rcGFyYW0pCiAgICAgICAgYXN5bmMgd2l0aCByZXEuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXIpIGFzIHJlc3A6CiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzICE9ICJzdWNjZXNzIjoKICAgICAgICAgICAgI3JldHVybiAKICAgICAgICAgICAgICB0b2RheSA9IERULmRhdGUudG9kYXkoKQogICAgICAgICAgICAgIGxhdGVyID0gdG9kYXkgKyBEVC50aW1lZGVsdGEoZGF5cz1pbnQoZSkpCiAgICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KAogICAgICAgICAgICAgIHRleHQ9KGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiog4p+oIFNTSCBBY2NvdW50IOKfqSoqIFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipVc2VybmFtZToqKiBge3V9YFxuIgogICAgICAgICAgICAgIGYiKipQYXNzd29yZDoqKiBge3B9YFxuIgogICAgICAgICAgICAgIGYiKipEb21haW46KiogYHtkb21haW59YFxuIgogICAgICAgICAgICAgIGYiKipQb3J0IFNTTCA6KiogYDIyMiwgNDQ3YFxuIgogICAgICAgICAgICAgIGYiKipQb3J0IFdTIDoqKiBgODBgXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQgV1MgU1NMIDoqKiBgNDQzYFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipQYXlMb2FkIFdTOioqXG4iCiAgICAgICAgICAgICAgZiIqKmBHRVQgLyBIVFRQLzEuMVtjcmxmXUhvc3Q6IHtkb21haW59W2NybGZdQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVtjcmxmXVVzZXItQWdlbnQ6IFt1YV1bY3JsZl1VcGdyYWRlOiB3ZWJzb2NrZXRbY3JsZl1bY3JsZl1gXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKkV4cCBVbnRpbDoqKiBge2xhdGVyfWBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIpLAogICAgICAgICAKICAgICAgICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgICAgICAgcGFyc2VfbW9kZT1lbnVtcy5QYXJzZU1vZGUuTUFSS0RPV04KICAgICAKICAgIAogICAgICAgICkKICAgICAgICAKQHVzZXJnZS5vbl9jbWQoCiAgICAidm1lc3NfZG8xIiwgYWJvdXQ9ewogICAgICAgICdoZWFkZXInOiAiQ3JlYXRlIFZNRVNTIEFjY291bnQiLAogICAgICAgICdkZXNjcmlwdGlvbic6ICJrZWdhYnV0YW4geWcgaGFxaXFpIiwKICAgICAgICAndXNhZ2UnOiAie3RyfXZtZXNzX2RvMSBbdXNlcl06W2V4cF0ifSkKYXN5bmMgZGVmIHZtZXNzKG1lc3NhZ2U6IE1lc3NhZ2UpOgogICAgIiIidm1lc3MgYWNjb3VudCIiIgogICAgcmVwbGllZCA9IG1lc3NhZ2UuaW5wdXRfc3RyIAogICAgaWYgbm90IHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgSkdOIEtPU09ORyBCTE9LIWAiKQogICAgICAgIHJldHVybgogICAgaWYgIjoiIG5vdCBpbiByZXBsaWVkOgogICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFVTRVI6RVhQICFgIikKICAgICAgICByZXR1cm4KICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFR1bmdndSBCbG9nICFgIikKICAgIGFzeW5jIHdpdGggYWlvaHR0cC5DbGllbnRTZXNzaW9uKCkgYXMgcmVxOgogICAgICAgIHUgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVswXQogICAgICAgIHAgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVsxXQogICAgICAgIHBhcmFtID0gZiI6Njk2OS9jcmVhdGUtdm1lc3M/dXNlcj17dX0mZXhwPXtwfSIKICAgICAgICB1cmwgPSAoImh0dHA6Ly9kbzEuZGVua2FhcmEubWUiK3BhcmFtKQogICAgICAgIGFzeW5jIHdpdGggcmVxLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVyKSBhcyByZXNwOgogICAgICAgICAgICBpZiByZXNwLnN0YXR1cyAhPSAiZXJyb3IiOgogICAgICAgICAgICAjcmV0dXJuIAogICAgICAgICAgICAgIHh4ID0gYXdhaXQgcmVzcC50ZXh0KCkKICAgICAgICMgaWYgeHhbJ3N0YXR1c19jb2RlJ10gPT0gMDoKICAgICAgICAgICAgICB4ID0geHgucmVwbGFjZSgiWyIsIiIpLnJlcGxhY2UoIl0iLCIiKS5yZXBsYWNlKCInIiwKIiIpLnNwbGl0KCIsIikKICAgICAgICAgICAgICB6ID0gYmFzZTY0LmI2NGRlY29kZSh4WzBdLnJlcGxhY2UoInZtZXNzOi8vIiwiIikpLmRlY29kZSgiYXNjaWkiKQogICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHopCiAgICAgICAgICAgICAgejEgPSBiYXNlNjQuYjY0ZGVjb2RlKHhbMV0ucmVwbGFjZSgidm1lc3M6Ly8iLCIiKSkuZGVjb2RlKCJhc2NpaSIpCiAgICAgICAgICAgICAgejEgPSBqc29uLmxvYWRzKHoxKQogICAgICAgICAgICAgIHBvcnR0bHMgPSB6Wydwb3J0J10KICAgICAgICAgICAgICBwb3J0aHR0cCA9IHoxWydwb3J0J10KICAgICAgICAgICAgICBkb21haW4gPSB6WydhZGQnXQogICAgICAgICAgICAgIHV1aWQgPSB6WydpZCddCiAgICAgICAgICAgICAgcGF0aCA9IHpbJ3BhdGgnXQogICAgICAgICAgICAgIHRvZGF5ID0gRFQuZGF0ZS50b2RheSgpCiAgICAgICAgICAgICAgbGF0ZXIgPSB0b2RheSArIERULnRpbWVkZWx0YShkYXlzPWludChwKSkKICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoCiAgICAgICAgdGV4dD0oZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiICoq4p+oIFZNRVNTIOKfqSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUmVtYXJrcyA6KiogYHt1fWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IERvbWFpbiA6KiogYHtkb21haW59YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgVVVJRCA6KiogYHt1dWlkfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IFBvcnQgVExTIDoqKiBge3BvcnR0bHN9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUG9ydCBIVFRQIDoqKiBge3BvcnRodHRwfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IFBhdGggOioqIGB7cGF0aH1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIiAqKlZtZXNzIFRMUyBsaW5rIDoqKlxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgYHt4WzBdfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiICoqVm1lc3MgSFRUUCBsaW5rIDoqKlxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgYHt4WzFdLnN0cmlwKCl9YFxuIgogICAgICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICAgICAgZiIgKipWbWVzcyBHUlBDIGxpbmsgOioqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBge3hbMl0uc3RyaXAoKX1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIioqIEV4cGlyZWQgOioqIGB7bGF0ZXJ9YFxuIgogICAgICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKioiKSwKICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICBwYXJzZV9tb2RlPWVudW1zLlBhcnNlTW9kZS5NQVJLRE9XTgogICAgICAgICkKICAgICAgICAKQHVzZXJnZS5vbl9jbWQoCiAgICAidHJvamFuX2RvMSIsIGFib3V0PXsKICAgICAgICAnaGVhZGVyJzogIkNyZWF0ZSBUUk9KQU4gQWNjb3VudCIsCiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogImtlZ2FidXRhbiB5ZyBoYXFpcWkiLAogICAgICAgICd1c2FnZSc6ICJ7dHJ9dHJvamFuX2RvMSBbdXNlcl06W2V4cF0ifSkKYXN5bmMgZGVmIHRyb2phbihtZXNzYWdlOiBNZXNzYWdlKToKICAgICIiIlRST0pBTiBhY2NvdW50IiIiCiAgICByZXBsaWVkID0gbWVzc2FnZS5pbnB1dF9zdHIgCiAgICBpZiBub3QgcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBKR04gS09TT05HIEJMT0shYCIpCiAgICAgICAgcmV0dXJuCiAgICBpZiAiOiIgbm90IGluIHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVVNFUjpFWFAgIWAiKQogICAgICAgIHJldHVybgogICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVHVuZ2d1IEJsb2cgIWAiKQogICAgYXN5bmMgd2l0aCBhaW9odHRwLkNsaWVudFNlc3Npb24oKSBhcyByZXE6CiAgICAgICAgdSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzBdCiAgICAgICAgcCA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzFdCiAgICAgICAgcGFyYW0gPSBmIjo2OTY5L3Ryb2phbi1jcmVhdGU/dXNlcj17dX0mZXhwPXtwfSIKICAgICAgICB1cmwgPSAoImh0dHA6Ly9kbzEuZGVua2FhcmEubWUiK3BhcmFtKQogICAgICAgIGFzeW5jIHdpdGggcmVxLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVyKSBhcyByZXNwOgogICAgICAgICAgICBpZiByZXNwLnN0YXR1cyAhPSAiZXJyb3IiOgogICAgICAgICAgICAjcmV0dXJuIAogICAgICAgICAgICAgIHh4ID0gYXdhaXQgcmVzcC50ZXh0KCkKICAgICAgICAgICAgICB4ID0geHgucmVwbGFjZSgiWyIsIiIpLnJlcGxhY2UoIl0iLCIiKS5yZXBsYWNlKCInIiwKIiIpLnNwbGl0KCIsIikKICAgICAgICAgICAgI3JlbWFya3MgPSByZS5zZWFyY2goIiMoLiopIix4WzBdKS5ncm91cCgxKQogICAgICAgICAgICBkb21haW4gPSByZS5zZWFyY2goIkAoLio/KToiLHhbMF0pLmdyb3VwKDEpCiAgICAgICAgICAgIHV1aWQgPSByZS5zZWFyY2goInRyb2phbjovLyguKj8pQCIseFswXSkuZ3JvdXAoMSkKICAgICAgICAjcG9ydCA9IHJlLnNlYXJjaChkb21haW4rIjooLio/KSIseFswXSkuZ3JvdXAoMSkKICAgICAgICAgICAgdG9kYXkgPSBEVC5kYXRlLnRvZGF5KCkKICAgICAgICAgICAgbGF0ZXIgPSB0b2RheSArIERULnRpbWVkZWx0YShkYXlzPWludChwKSkKICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KAogICAgICAgIHRleHQ9KGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiog4p+oIFRyb2phbi13cyDin6kqKiBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqUmVtYXJrczoqKiBge3V9YFxuIgogICAgICAgICAgICAgIGYiKipEb21haW46KiogYHtkb21haW59YFxuIgogICAgICAgICAgICAgIGYiKipVVUlEOioqIGB7dXVpZH1gXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQ6KiogYDQ0M2BcbiIKICAgICAgICAgICAgICBmIioqTmV0d29yazoqKiBgd3MvZ3JwY2BcbiIKICAgICAgICAgICAgICBmIioqUGF0aDoqKiBgL3Ryb2phbmBcbiIKICAgICAgICAgICAgICBmIioqU2VydmljZU5hbWU6KiogYHRyb2phbmBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqIFRyb2phbi13cyBVUkw6KipcbiIKICAgICAgICAgICAgICBmIiBge3hbMF19YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiogVHJvamFuLWdycGMgVVJMOioqXG4iCiAgICAgICAgICAgICAgZiIgYHt4WzFdfWBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqRXhwIFVudGlsOioqIGB7bGF0ZXJ9YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIiksCiAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgcGFyc2VfbW9kZT1lbnVtcy5QYXJzZU1vZGUuTUFSS0RPV04KICAgICAgICApCiAgICAgICAgCiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0jCgpAdXNlcmdlLm9uX2NtZCgKICAgICJzc2hfZG8yIiwgYWJvdXQ9ewogICAgICAgICdoZWFkZXInOiAiQ3JlYXRlIFNTSCBBY2NvdW50IiwKICAgICAgICAnZGVzY3JpcHRpb24nOiAia2VnYWJ1dGFuIHlnIGhhcWlxaSIsCiAgICAgICAgJ3VzYWdlJzogInt0cn1zc2hfZG8yIFt1c2VyXTpbcHddOltleHBdIn0pCmFzeW5jIGRlZiBzc2gobWVzc2FnZTogTWVzc2FnZSk6CiAgICAiIiJTU0ggYWNjb3VudCIiIgogICAgcmVwbGllZCA9IG1lc3NhZ2UuaW5wdXRfc3RyIAogICAgaWYgbm90IHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgSkdOIEtPU09ORyBCTE9LIWAiKQogICAgICAgIHJldHVybgogICAgaWYgIjoiIG5vdCBpbiByZXBsaWVkOgogICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFVTRVI6UFc6RVhQICFgIikKICAgICAgICByZXR1cm4KICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFR1bmdndSBCbG9nICFgIikKICAgIGFzeW5jIHdpdGggYWlvaHR0cC5DbGllbnRTZXNzaW9uKCkgYXMgcmVxOgogICAgICAgIHUgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVswXQogICAgICAgIHAgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVsxXQogICAgICAgIGUgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVsyXQogICAgICAgIGRvbWFpbiA9IGYiZG8zLmRlbmthYXJhLm1lIgogICAgICAgIHBhcmFtID0gZiI6Njk2OS9hZGR1c2VyL2V4cD8/dXNlcj17dX0mcGFzc3dvcmQ9e3B9JmV4cD17ZX0iCiAgICAgICAgdXJsID0gKCJodHRwOi8vIitkb21haW4rcGFyYW0pCiAgICAgICAgYXN5bmMgd2l0aCByZXEuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXIpIGFzIHJlc3A6CiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzICE9ICJzdWNjZXNzIjoKICAgICAgICAgICAgI3JldHVybiAKICAgICAgICAgICAgICB0b2RheSA9IERULmRhdGUudG9kYXkoKQogICAgICAgICAgICAgIGxhdGVyID0gdG9kYXkgKyBEVC50aW1lZGVsdGEoZGF5cz1pbnQoZSkpCiAgICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KAogICAgICAgICAgICAgIHRleHQ9KGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiog4p+oIFNTSCBBY2NvdW50IOKfqSoqIFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipVc2VybmFtZToqKiBge3V9YFxuIgogICAgICAgICAgICAgIGYiKipQYXNzd29yZDoqKiBge3B9YFxuIgogICAgICAgICAgICAgIGYiKipEb21haW46KiogYHtkb21haW59YFxuIgogICAgICAgICAgICAgIGYiKipQb3J0IFNTTCA6KiogYDIyMiwgNDQ3YFxuIgogICAgICAgICAgICAgIGYiKipQb3J0IFdTIDoqKiBgODBgXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQgV1MgU1NMIDoqKiBgNDQzYFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipQYXlMb2FkIFdTOioqXG4iCiAgICAgICAgICAgICAgZiIqKmBHRVQgLyBIVFRQLzEuMVtjcmxmXUhvc3Q6IHtkb21haW59W2NybGZdQ29ubmVjdGlvbjogS2VlcC1BbGl2ZVtjcmxmXVVzZXItQWdlbnQ6IFt1YV1bY3JsZl1VcGdyYWRlOiB3ZWJzb2NrZXRbY3JsZl1bY3JsZl1gXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKkV4cCBVbnRpbDoqKiBge2xhdGVyfWBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIpLAogICAgICAgICAKICAgICAgICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgICAgICAgcGFyc2VfbW9kZT1lbnVtcy5QYXJzZU1vZGUuTUFSS0RPV04KICAgICAKICAgIAogICAgICAgICkKICAgICAgICAKQHVzZXJnZS5vbl9jbWQoCiAgICAidm1lc3NfZG8yIiwgYWJvdXQ9ewogICAgICAgICdoZWFkZXInOiAiQ3JlYXRlIFZNRVNTIEFjY291bnQiLAogICAgICAgICdkZXNjcmlwdGlvbic6ICJrZWdhYnV0YW4geWcgaGFxaXFpIiwKICAgICAgICAndXNhZ2UnOiAie3RyfXZtZXNzX2RvMiBbdXNlcl06W2V4cF0ifSkKYXN5bmMgZGVmIHZtZXNzKG1lc3NhZ2U6IE1lc3NhZ2UpOgogICAgIiIidm1lc3MgYWNjb3VudCIiIgogICAgcmVwbGllZCA9IG1lc3NhZ2UuaW5wdXRfc3RyIAogICAgaWYgbm90IHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgSkdOIEtPU09ORyBCTE9LIWAiKQogICAgICAgIHJldHVybgogICAgaWYgIjoiIG5vdCBpbiByZXBsaWVkOgogICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFVTRVI6RVhQICFgIikKICAgICAgICByZXR1cm4KICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYFR1bmdndSBCbG9nICFgIikKICAgIGFzeW5jIHdpdGggYWlvaHR0cC5DbGllbnRTZXNzaW9uKCkgYXMgcmVxOgogICAgICAgIHUgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVswXQogICAgICAgIHAgPSByZXBsaWVkLnN0cmlwKCkuc3BsaXQoJzonKVsxXQogICAgICAgIHBhcmFtID0gZiI6Njk2OS9jcmVhdGUtdm1lc3M/dXNlcj17dX0mZXhwPXtwfSIKICAgICAgICB1cmwgPSAoImh0dHA6Ly9kbzMuZGVua2FhcmEubWUiK3BhcmFtKQogICAgICAgIGFzeW5jIHdpdGggcmVxLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVyKSBhcyByZXNwOgogICAgICAgICAgICBpZiByZXNwLnN0YXR1cyAhPSAiZXJyb3IiOgogICAgICAgICAgICAjcmV0dXJuIAogICAgICAgICAgICAgIHh4ID0gYXdhaXQgcmVzcC50ZXh0KCkKICAgICAgICMgaWYgeHhbJ3N0YXR1c19jb2RlJ10gPT0gMDoKICAgICAgICAgICAgICB4ID0geHgucmVwbGFjZSgiWyIsIiIpLnJlcGxhY2UoIl0iLCIiKS5yZXBsYWNlKCInIiwKIiIpLnNwbGl0KCIsIikKICAgICAgICAgICAgICB6ID0gYmFzZTY0LmI2NGRlY29kZSh4WzBdLnJlcGxhY2UoInZtZXNzOi8vIiwiIikpLmRlY29kZSgiYXNjaWkiKQogICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHopCiAgICAgICAgICAgICAgejEgPSBiYXNlNjQuYjY0ZGVjb2RlKHhbMV0ucmVwbGFjZSgidm1lc3M6Ly8iLCIiKSkuZGVjb2RlKCJhc2NpaSIpCiAgICAgICAgICAgICAgejEgPSBqc29uLmxvYWRzKHoxKQogICAgICAgICAgICAgIHBvcnR0bHMgPSB6Wydwb3J0J10KICAgICAgICAgICAgICBwb3J0aHR0cCA9IHoxWydwb3J0J10KICAgICAgICAgICAgICBkb21haW4gPSB6WydhZGQnXQogICAgICAgICAgICAgIHV1aWQgPSB6WydpZCddCiAgICAgICAgICAgICAgcGF0aCA9IHpbJ3BhdGgnXQogICAgICAgICAgICAgIHRvZGF5ID0gRFQuZGF0ZS50b2RheSgpCiAgICAgICAgICAgICAgbGF0ZXIgPSB0b2RheSArIERULnRpbWVkZWx0YShkYXlzPWludChwKSkKICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoCiAgICAgICAgdGV4dD0oZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiICoq4p+oIFZNRVNTIOKfqSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUmVtYXJrcyA6KiogYHt1fWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IERvbWFpbiA6KiogYHtkb21haW59YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgVVVJRCA6KiogYHt1dWlkfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IFBvcnQgVExTIDoqKiBge3BvcnR0bHN9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUG9ydCBIVFRQIDoqKiBge3BvcnRodHRwfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IFBhdGggOioqIGB7cGF0aH1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIiAqKlZtZXNzIFRMUyBsaW5rIDoqKlxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgYHt4WzBdfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiICoqVm1lc3MgSFRUUCBsaW5rIDoqKlxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgYHt4WzFdLnN0cmlwKCl9YFxuIgogICAgICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICAgICAgZiIgKipWbWVzcyBHUlBDIGxpbmsgOioqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBge3hbMl0uc3RyaXAoKX1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIioqIEV4cGlyZWQgOioqIGB7bGF0ZXJ9YFxuIgogICAgICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKioiKSwKICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICBwYXJzZV9tb2RlPWVudW1zLlBhcnNlTW9kZS5NQVJLRE9XTgogICAgICAgICkKICAgICAgICAKQHVzZXJnZS5vbl9jbWQoCiAgICAidHJvamFuX2RvMiIsIGFib3V0PXsKICAgICAgICAnaGVhZGVyJzogIkNyZWF0ZSBUUk9KQU4gQWNjb3VudCIsCiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogImtlZ2FidXRhbiB5ZyBoYXFpcWkiLAogICAgICAgICd1c2FnZSc6ICJ7dHJ9dHJvamFuX2RvMiBbdXNlcl06W2V4cF0ifSkKYXN5bmMgZGVmIHRyb2phbihtZXNzYWdlOiBNZXNzYWdlKToKICAgICIiIlRST0pBTiBhY2NvdW50IiIiCiAgICByZXBsaWVkID0gbWVzc2FnZS5pbnB1dF9zdHIgCiAgICBpZiBub3QgcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBKR04gS09TT05HIEJMT0shYCIpCiAgICAgICAgcmV0dXJuCiAgICBpZiAiOiIgbm90IGluIHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVVNFUjpFWFAgIWAiKQogICAgICAgIHJldHVybgogICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVHVuZ2d1IEJsb2cgIWAiKQogICAgYXN5bmMgd2l0aCBhaW9odHRwLkNsaWVudFNlc3Npb24oKSBhcyByZXE6CiAgICAgICAgdSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzBdCiAgICAgICAgcCA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzFdCiAgICAgICAgcGFyYW0gPSBmIjo2OTY5L3Ryb2phbi1jcmVhdGU/dXNlcj17dX0mZXhwPXtwfSIKICAgICAgICB1cmwgPSAoImh0dHA6Ly9kbzMuZGVua2FhcmEubWUiK3BhcmFtKQogICAgICAgIGFzeW5jIHdpdGggcmVxLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVyKSBhcyByZXNwOgogICAgICAgICAgICBpZiByZXNwLnN0YXR1cyAhPSAiZXJyb3IiOgogICAgICAgICAgICAjcmV0dXJuIAogICAgICAgICAgICAgIHh4ID0gYXdhaXQgcmVzcC50ZXh0KCkKICAgICAgICAgICAgICB4ID0geHgucmVwbGFjZSgiWyIsIiIpLnJlcGxhY2UoIl0iLCIiKS5yZXBsYWNlKCInIiwKIiIpLnNwbGl0KCIsIikKICAgICAgICAgICAgI3JlbWFya3MgPSByZS5zZWFyY2goIiMoLiopIix4WzBdKS5ncm91cCgxKQogICAgICAgICAgICBkb21haW4gPSByZS5zZWFyY2goIkAoLio/KToiLHhbMF0pLmdyb3VwKDEpCiAgICAgICAgICAgIHV1aWQgPSByZS5zZWFyY2goInRyb2phbjovLyguKj8pQCIseFswXSkuZ3JvdXAoMSkKICAgICAgICAjcG9ydCA9IHJlLnNlYXJjaChkb21haW4rIjooLio/KSIseFswXSkuZ3JvdXAoMSkKICAgICAgICAgICAgdG9kYXkgPSBEVC5kYXRlLnRvZGF5KCkKICAgICAgICAgICAgbGF0ZXIgPSB0b2RheSArIERULnRpbWVkZWx0YShkYXlzPWludChwKSkKICAgICAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KAogICAgICAgIHRleHQ9KGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiog4p+oIFRyb2phbi13cyDin6kqKiBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqUmVtYXJrczoqKiBge3V9YFxuIgogICAgICAgICAgICAgIGYiKipEb21haW46KiogYHtkb21haW59YFxuIgogICAgICAgICAgICAgIGYiKipVVUlEOioqIGB7dXVpZH1gXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQ6KiogYDQ0M2BcbiIKICAgICAgICAgICAgICBmIioqTmV0d29yazoqKiBgd3MvZ3JwY2BcbiIKICAgICAgICAgICAgICBmIioqUGF0aDoqKiBgL3Ryb2phbmBcbiIKICAgICAgICAgICAgICBmIioqU2VydmljZU5hbWU6KiogYHRyb2phbmBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqIFRyb2phbi13cyBVUkw6KipcbiIKICAgICAgICAgICAgICBmIiBge3hbMF19YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiogVHJvamFuLWdycGMgVVJMOioqXG4iCiAgICAgICAgICAgICAgZiIgYHt4WzFdfWBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqRXhwIFVudGlsOioqIGB7bGF0ZXJ9YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIiksCiAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgcGFyc2VfbW9kZT1lbnVtcy5QYXJzZU1vZGUuTUFSS0RPV04KICAgICAgICApCiAgICAgICAgCiM9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0jCkB1c2VyZ2Uub25fY21kKAogICAgInNzaF9kbzMiLCBhYm91dD17CiAgICAgICAgJ2hlYWRlcic6ICJDcmVhdGUgU1NIIEFjY291bnQiLAogICAgICAgICdkZXNjcmlwdGlvbic6ICJrZWdhYnV0YW4geWcgaGFxaXFpIiwKICAgICAgICAndXNhZ2UnOiAie3RyfXNzaF9kbzMgW3VzZXJdOltwd106W2V4cF0ifSkKYXN5bmMgZGVmIHNzaChtZXNzYWdlOiBNZXNzYWdlKToKICAgICIiIlNTSCBhY2NvdW50IiIiCiAgICByZXBsaWVkID0gbWVzc2FnZS5pbnB1dF9zdHIgCiAgICBpZiBub3QgcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBKR04gS09TT05HIEJMT0shYCIpCiAgICAgICAgcmV0dXJuCiAgICBpZiAiOiIgbm90IGluIHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVVNFUjpQVzpFWFAgIWAiKQogICAgICAgIHJldHVybgogICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVHVuZ2d1IEJsb2cgIWAiKQogICAgYXN5bmMgd2l0aCBhaW9odHRwLkNsaWVudFNlc3Npb24oKSBhcyByZXE6CiAgICAgICAgdSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzBdCiAgICAgICAgcCA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzFdCiAgICAgICAgZSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzJdCiAgICAgICAgZG9tYWluID0gZiJkbzQuZGVua2FhcmEubWUiCiAgICAgICAgcGFyYW0gPSBmIjo2OTY5L2FkZHVzZXIvZXhwPz91c2VyPXt1fSZwYXNzd29yZD17cH0mZXhwPXtlfSIKICAgICAgICB1cmwgPSAoImh0dHA6Ly8iK2RvbWFpbitwYXJhbSkKICAgICAgICBhc3luYyB3aXRoIHJlcS5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcikgYXMgcmVzcDoKICAgICAgICAgICAgaWYgcmVzcC5zdGF0dXMgIT0gInN1Y2Nlc3MiOgogICAgICAgICAgICAjcmV0dXJuIAogICAgICAgICAgICAgIHRvZGF5ID0gRFQuZGF0ZS50b2RheSgpCiAgICAgICAgICAgICAgbGF0ZXIgPSB0b2RheSArIERULnRpbWVkZWx0YShkYXlzPWludChlKSkKICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoCiAgICAgICAgICAgICAgdGV4dD0oZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKiDin6ggU1NIIEFjY291bnQg4p+pKiogXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKlVzZXJuYW1lOioqIGB7dX1gXG4iCiAgICAgICAgICAgICAgZiIqKlBhc3N3b3JkOioqIGB7cH1gXG4iCiAgICAgICAgICAgICAgZiIqKkRvbWFpbjoqKiBge2RvbWFpbn1gXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQgU1NMIDoqKiBgMjIyLCA0NDdgXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQgV1MgOioqIGA4MGBcbiIKICAgICAgICAgICAgICBmIioqUG9ydCBXUyBTU0wgOioqIGA0NDNgXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKlBheUxvYWQgV1M6KipcbiIKICAgICAgICAgICAgICBmIioqYEdFVCAvIEhUVFAvMS4xW2NybGZdSG9zdDoge2RvbWFpbn1bY3JsZl1Db25uZWN0aW9uOiBLZWVwLUFsaXZlW2NybGZdVXNlci1BZ2VudDogW3VhXVtjcmxmXVVwZ3JhZGU6IHdlYnNvY2tldFtjcmxmXVtjcmxmXWBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqRXhwIFVudGlsOioqIGB7bGF0ZXJ9YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIiksCiAgICAgICAgIAogICAgICAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgICAgICBwYXJzZV9tb2RlPWVudW1zLlBhcnNlTW9kZS5NQVJLRE9XTgogICAgIAogICAgCiAgICAgICAgKQogICAgICAgIApAdXNlcmdlLm9uX2NtZCgKICAgICJ2bWVzc19kbzMiLCBhYm91dD17CiAgICAgICAgJ2hlYWRlcic6ICJDcmVhdGUgVk1FU1MgQWNjb3VudCIsCiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogImtlZ2FidXRhbiB5ZyBoYXFpcWkiLAogICAgICAgICd1c2FnZSc6ICJ7dHJ9dm1lc3NfZG8zIFt1c2VyXTpbZXhwXSJ9KQphc3luYyBkZWYgdm1lc3MobWVzc2FnZTogTWVzc2FnZSk6CiAgICAiIiJ2bWVzcyBhY2NvdW50IiIiCiAgICByZXBsaWVkID0gbWVzc2FnZS5pbnB1dF9zdHIgCiAgICBpZiBub3QgcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBKR04gS09TT05HIEJMT0shYCIpCiAgICAgICAgcmV0dXJuCiAgICBpZiAiOiIgbm90IGluIHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVVNFUjpFWFAgIWAiKQogICAgICAgIHJldHVybgogICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVHVuZ2d1IEJsb2cgIWAiKQogICAgYXN5bmMgd2l0aCBhaW9odHRwLkNsaWVudFNlc3Npb24oKSBhcyByZXE6CiAgICAgICAgdSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzBdCiAgICAgICAgcCA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzFdCiAgICAgICAgcGFyYW0gPSBmIjo2OTY5L2NyZWF0ZS12bWVzcz91c2VyPXt1fSZleHA9e3B9IgogICAgICAgIHVybCA9ICgiaHR0cDovL2RvNC5kZW5rYWFyYS5tZSIrcGFyYW0pCiAgICAgICAgYXN5bmMgd2l0aCByZXEuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXIpIGFzIHJlc3A6CiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzICE9ICJlcnJvciI6CiAgICAgICAgICAgICNyZXR1cm4gCiAgICAgICAgICAgICAgeHggPSBhd2FpdCByZXNwLnRleHQoKQogICAgICAgIyBpZiB4eFsnc3RhdHVzX2NvZGUnXSA9PSAwOgogICAgICAgICAgICAgIHggPSB4eC5yZXBsYWNlKCJbIiwiIikucmVwbGFjZSgiXSIsIiIpLnJlcGxhY2UoIiciLAoiIikuc3BsaXQoIiwiKQogICAgICAgICAgICAgIHogPSBiYXNlNjQuYjY0ZGVjb2RlKHhbMF0ucmVwbGFjZSgidm1lc3M6Ly8iLCIiKSkuZGVjb2RlKCJhc2NpaSIpCiAgICAgICAgICAgICAgeiA9IGpzb24ubG9hZHMoeikKICAgICAgICAgICAgICB6MSA9IGJhc2U2NC5iNjRkZWNvZGUoeFsxXS5yZXBsYWNlKCJ2bWVzczovLyIsIiIpKS5kZWNvZGUoImFzY2lpIikKICAgICAgICAgICAgICB6MSA9IGpzb24ubG9hZHMoejEpCiAgICAgICAgICAgICAgcG9ydHRscyA9IHpbJ3BvcnQnXQogICAgICAgICAgICAgIHBvcnRodHRwID0gejFbJ3BvcnQnXQogICAgICAgICAgICAgIGRvbWFpbiA9IHpbJ2FkZCddCiAgICAgICAgICAgICAgdXVpZCA9IHpbJ2lkJ10KICAgICAgICAgICAgICBwYXRoID0gelsncGF0aCddCiAgICAgICAgICAgICAgdG9kYXkgPSBEVC5kYXRlLnRvZGF5KCkKICAgICAgICAgICAgICBsYXRlciA9IHRvZGF5ICsgRFQudGltZWRlbHRhKGRheXM9aW50KHApKQogICAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgKICAgICAgICB0ZXh0PShmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICAgICAgZiIgKirin6ggVk1FU1Mg4p+pKipcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBSZW1hcmtzIDoqKiBge3V9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgRG9tYWluIDoqKiBge2RvbWFpbn1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBVVUlEIDoqKiBge3V1aWR9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUG9ydCBUTFMgOioqIGB7cG9ydHRsc31gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBQb3J0IEhUVFAgOioqIGB7cG9ydGh0dHB9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUGF0aCA6KiogYHtwYXRofWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiICoqVm1lc3MgVExTIGxpbmsgOioqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBge3hbMF19YFxuIgogICAgICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICAgICAgZiIgKipWbWVzcyBIVFRQIGxpbmsgOioqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBge3hbMV0uc3RyaXAoKX1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIiAqKlZtZXNzIEdSUEMgbGluayA6KipcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IGB7eFsyXS5zdHJpcCgpfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiKiogRXhwaXJlZCA6KiogYHtsYXRlcn1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKiIpLAogICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgIHBhcnNlX21vZGU9ZW51bXMuUGFyc2VNb2RlLk1BUktET1dOCiAgICAgICAgKQogICAgICAgIApAdXNlcmdlLm9uX2NtZCgKICAgICJ0cm9qYW5fZG8zIiwgYWJvdXQ9ewogICAgICAgICdoZWFkZXInOiAiQ3JlYXRlIFRST0pBTiBBY2NvdW50IiwKICAgICAgICAnZGVzY3JpcHRpb24nOiAia2VnYWJ1dGFuIHlnIGhhcWlxaSIsCiAgICAgICAgJ3VzYWdlJzogInt0cn10cm9qYW5fZG8zIFt1c2VyXTpbZXhwXSJ9KQphc3luYyBkZWYgdHJvamFuKG1lc3NhZ2U6IE1lc3NhZ2UpOgogICAgIiIiVFJPSkFOIGFjY291bnQiIiIKICAgIHJlcGxpZWQgPSBtZXNzYWdlLmlucHV0X3N0ciAKICAgIGlmIG5vdCByZXBsaWVkOgogICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYEpHTiBLT1NPTkcgQkxPSyFgIikKICAgICAgICByZXR1cm4KICAgIGlmICI6IiBub3QgaW4gcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBVU0VSOkVYUCAhYCIpCiAgICAgICAgcmV0dXJuCiAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBUdW5nZ3UgQmxvZyAhYCIpCiAgICBhc3luYyB3aXRoIGFpb2h0dHAuQ2xpZW50U2Vzc2lvbigpIGFzIHJlcToKICAgICAgICB1ID0gcmVwbGllZC5zdHJpcCgpLnNwbGl0KCc6JylbMF0KICAgICAgICBwID0gcmVwbGllZC5zdHJpcCgpLnNwbGl0KCc6JylbMV0KICAgICAgICBwYXJhbSA9IGYiOjY5NjkvdHJvamFuLWNyZWF0ZT91c2VyPXt1fSZleHA9e3B9IgogICAgICAgIHVybCA9ICgiaHR0cDovL2RvNC5kZW5rYWFyYS5tZSIrcGFyYW0pCiAgICAgICAgYXN5bmMgd2l0aCByZXEuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXIpIGFzIHJlc3A6CiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzICE9ICJlcnJvciI6CiAgICAgICAgICAgICNyZXR1cm4gCiAgICAgICAgICAgICAgeHggPSBhd2FpdCByZXNwLnRleHQoKQogICAgICAgICAgICAgIHggPSB4eC5yZXBsYWNlKCJbIiwiIikucmVwbGFjZSgiXSIsIiIpLnJlcGxhY2UoIiciLAoiIikuc3BsaXQoIiwiKQogICAgICAgICAgICAjcmVtYXJrcyA9IHJlLnNlYXJjaCgiIyguKikiLHhbMF0pLmdyb3VwKDEpCiAgICAgICAgICAgIGRvbWFpbiA9IHJlLnNlYXJjaCgiQCguKj8pOiIseFswXSkuZ3JvdXAoMSkKICAgICAgICAgICAgdXVpZCA9IHJlLnNlYXJjaCgidHJvamFuOi8vKC4qPylAIix4WzBdKS5ncm91cCgxKQogICAgICAgICNwb3J0ID0gcmUuc2VhcmNoKGRvbWFpbisiOiguKj8pIix4WzBdKS5ncm91cCgxKQogICAgICAgICAgICB0b2RheSA9IERULmRhdGUudG9kYXkoKQogICAgICAgICAgICBsYXRlciA9IHRvZGF5ICsgRFQudGltZWRlbHRhKGRheXM9aW50KHApKQogICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoCiAgICAgICAgdGV4dD0oZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKiDin6ggVHJvamFuLXdzIOKfqSoqIFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipSZW1hcmtzOioqIGB7dX1gXG4iCiAgICAgICAgICAgICAgZiIqKkRvbWFpbjoqKiBge2RvbWFpbn1gXG4iCiAgICAgICAgICAgICAgZiIqKlVVSUQ6KiogYHt1dWlkfWBcbiIKICAgICAgICAgICAgICBmIioqUG9ydDoqKiBgNDQzYFxuIgogICAgICAgICAgICAgIGYiKipOZXR3b3JrOioqIGB3cy9ncnBjYFxuIgogICAgICAgICAgICAgIGYiKipQYXRoOioqIGAvdHJvamFuYFxuIgogICAgICAgICAgICAgIGYiKipTZXJ2aWNlTmFtZToqKiBgdHJvamFuYFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiogVHJvamFuLXdzIFVSTDoqKlxuIgogICAgICAgICAgICAgIGYiIGB7eFswXX1gXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKiBUcm9qYW4tZ3JwYyBVUkw6KipcbiIKICAgICAgICAgICAgICBmIiBge3hbMV19YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipFeHAgVW50aWw6KiogYHtsYXRlcn1gXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iKSwKICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICBwYXJzZV9tb2RlPWVudW1zLlBhcnNlTW9kZS5NQVJLRE9XTgogICAgICAgICkKICAgICAgICAKIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSMKCkB1c2VyZ2Uub25fY21kKAogICAgInNzaF9kbzQiLCBhYm91dD17CiAgICAgICAgJ2hlYWRlcic6ICJDcmVhdGUgU1NIIEFjY291bnQiLAogICAgICAgICdkZXNjcmlwdGlvbic6ICJrZWdhYnV0YW4geWcgaGFxaXFpIiwKICAgICAgICAndXNhZ2UnOiAie3RyfXNzaF9kbzQgW3VzZXJdOltwd106W2V4cF0ifSkKYXN5bmMgZGVmIHNzaChtZXNzYWdlOiBNZXNzYWdlKToKICAgICIiIlNTSCBhY2NvdW50IiIiCiAgICByZXBsaWVkID0gbWVzc2FnZS5pbnB1dF9zdHIgCiAgICBpZiBub3QgcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBKR04gS09TT05HIEJMT0shYCIpCiAgICAgICAgcmV0dXJuCiAgICBpZiAiOiIgbm90IGluIHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVVNFUjpQVzpFWFAgIWAiKQogICAgICAgIHJldHVybgogICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVHVuZ2d1IEJsb2cgIWAiKQogICAgYXN5bmMgd2l0aCBhaW9odHRwLkNsaWVudFNlc3Npb24oKSBhcyByZXE6CiAgICAgICAgdSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzBdCiAgICAgICAgcCA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzFdCiAgICAgICAgZSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzJdCiAgICAgICAgZG9tYWluID0gZiJkbzUuZGVua2FhcmEubWUiCiAgICAgICAgcGFyYW0gPSBmIjo2OTY5L2FkZHVzZXIvZXhwPz91c2VyPXt1fSZwYXNzd29yZD17cH0mZXhwPXtlfSIKICAgICAgICB1cmwgPSAoImh0dHA6Ly8iK2RvbWFpbitwYXJhbSkKICAgICAgICBhc3luYyB3aXRoIHJlcS5nZXQodXJsLCBoZWFkZXJzPWhlYWRlcikgYXMgcmVzcDoKICAgICAgICAgICAgaWYgcmVzcC5zdGF0dXMgIT0gInN1Y2Nlc3MiOgogICAgICAgICAgICAjcmV0dXJuIAogICAgICAgICAgICAgIHRvZGF5ID0gRFQuZGF0ZS50b2RheSgpCiAgICAgICAgICAgICAgbGF0ZXIgPSB0b2RheSArIERULnRpbWVkZWx0YShkYXlzPWludChlKSkKICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoCiAgICAgICAgICAgICAgdGV4dD0oZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKiDin6ggU1NIIEFjY291bnQg4p+pKiogXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKlVzZXJuYW1lOioqIGB7dX1gXG4iCiAgICAgICAgICAgICAgZiIqKlBhc3N3b3JkOioqIGB7cH1gXG4iCiAgICAgICAgICAgICAgZiIqKkRvbWFpbjoqKiBge2RvbWFpbn1gXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQgU1NMIDoqKiBgMjIyLCA0NDdgXG4iCiAgICAgICAgICAgICAgZiIqKlBvcnQgV1MgOioqIGA4MGBcbiIKICAgICAgICAgICAgICBmIioqUG9ydCBXUyBTU0wgOioqIGA0NDNgXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKlBheUxvYWQgV1M6KipcbiIKICAgICAgICAgICAgICBmIioqYEdFVCAvIEhUVFAvMS4xW2NybGZdSG9zdDoge2RvbWFpbn1bY3JsZl1Db25uZWN0aW9uOiBLZWVwLUFsaXZlW2NybGZdVXNlci1BZ2VudDogW3VhXVtjcmxmXVVwZ3JhZGU6IHdlYnNvY2tldFtjcmxmXVtjcmxmXWBcbiIKICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICBmIioqRXhwIFVudGlsOioqIGB7bGF0ZXJ9YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIiksCiAgICAgICAgIAogICAgICAgICAgICAgZGlzYWJsZV93ZWJfcGFnZV9wcmV2aWV3PVRydWUsCiAgICAgICAgICAgICBwYXJzZV9tb2RlPWVudW1zLlBhcnNlTW9kZS5NQVJLRE9XTgogICAgIAogICAgCiAgICAgICAgKQogICAgICAgIApAdXNlcmdlLm9uX2NtZCgKICAgICJ2bWVzc19kbzQiLCBhYm91dD17CiAgICAgICAgJ2hlYWRlcic6ICJDcmVhdGUgVk1FU1MgQWNjb3VudCIsCiAgICAgICAgJ2Rlc2NyaXB0aW9uJzogImtlZ2FidXRhbiB5ZyBoYXFpcWkiLAogICAgICAgICd1c2FnZSc6ICJ7dHJ9dm1lc3NfZG80IFt1c2VyXTpbZXhwXSJ9KQphc3luYyBkZWYgdm1lc3MobWVzc2FnZTogTWVzc2FnZSk6CiAgICAiIiJ2bWVzcyBhY2NvdW50IiIiCiAgICByZXBsaWVkID0gbWVzc2FnZS5pbnB1dF9zdHIgCiAgICBpZiBub3QgcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBKR04gS09TT05HIEJMT0shYCIpCiAgICAgICAgcmV0dXJuCiAgICBpZiAiOiIgbm90IGluIHJlcGxpZWQ6CiAgICAgICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVVNFUjpFWFAgIWAiKQogICAgICAgIHJldHVybgogICAgYXdhaXQgbWVzc2FnZS5lZGl0KCJgVHVuZ2d1IEJsb2cgIWAiKQogICAgYXN5bmMgd2l0aCBhaW9odHRwLkNsaWVudFNlc3Npb24oKSBhcyByZXE6CiAgICAgICAgdSA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzBdCiAgICAgICAgcCA9IHJlcGxpZWQuc3RyaXAoKS5zcGxpdCgnOicpWzFdCiAgICAgICAgcGFyYW0gPSBmIjo2OTY5L2NyZWF0ZS12bWVzcz91c2VyPXt1fSZleHA9e3B9IgogICAgICAgIHVybCA9ICgiaHR0cDovL2RvNS5kZW5rYWFyYS5tZSIrcGFyYW0pCiAgICAgICAgYXN5bmMgd2l0aCByZXEuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXIpIGFzIHJlc3A6CiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzICE9ICJlcnJvciI6CiAgICAgICAgICAgICNyZXR1cm4gCiAgICAgICAgICAgICAgeHggPSBhd2FpdCByZXNwLnRleHQoKQogICAgICAgIyBpZiB4eFsnc3RhdHVzX2NvZGUnXSA9PSAwOgogICAgICAgICAgICAgIHggPSB4eC5yZXBsYWNlKCJbIiwiIikucmVwbGFjZSgiXSIsIiIpLnJlcGxhY2UoIiciLAoiIikuc3BsaXQoIiwiKQogICAgICAgICAgICAgIHogPSBiYXNlNjQuYjY0ZGVjb2RlKHhbMF0ucmVwbGFjZSgidm1lc3M6Ly8iLCIiKSkuZGVjb2RlKCJhc2NpaSIpCiAgICAgICAgICAgICAgeiA9IGpzb24ubG9hZHMoeikKICAgICAgICAgICAgICB6MSA9IGJhc2U2NC5iNjRkZWNvZGUoeFsxXS5yZXBsYWNlKCJ2bWVzczovLyIsIiIpKS5kZWNvZGUoImFzY2lpIikKICAgICAgICAgICAgICB6MSA9IGpzb24ubG9hZHMoejEpCiAgICAgICAgICAgICAgcG9ydHRscyA9IHpbJ3BvcnQnXQogICAgICAgICAgICAgIHBvcnRodHRwID0gejFbJ3BvcnQnXQogICAgICAgICAgICAgIGRvbWFpbiA9IHpbJ2FkZCddCiAgICAgICAgICAgICAgdXVpZCA9IHpbJ2lkJ10KICAgICAgICAgICAgICBwYXRoID0gelsncGF0aCddCiAgICAgICAgICAgICAgdG9kYXkgPSBEVC5kYXRlLnRvZGF5KCkKICAgICAgICAgICAgICBsYXRlciA9IHRvZGF5ICsgRFQudGltZWRlbHRhKGRheXM9aW50KHApKQogICAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgKICAgICAgICB0ZXh0PShmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICAgICAgZiIgKirin6ggVk1FU1Mg4p+pKipcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBSZW1hcmtzIDoqKiBge3V9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgRG9tYWluIDoqKiBge2RvbWFpbn1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBVVUlEIDoqKiBge3V1aWR9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUG9ydCBUTFMgOioqIGB7cG9ydHRsc31gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBQb3J0IEhUVFAgOioqIGB7cG9ydGh0dHB9YFxuIgogICAgICAgICAgICAgICAgICBmIioqwrsgUGF0aCA6KiogYHtwYXRofWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiICoqVm1lc3MgVExTIGxpbmsgOioqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBge3hbMF19YFxuIgogICAgICAgICAgICAgICAgICBmIioq4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBKipcbiIKICAgICAgICAgICAgICAgICAgZiIgKipWbWVzcyBIVFRQIGxpbmsgOioqXG4iCiAgICAgICAgICAgICAgICAgIGYiKirCuyBge3hbMV0uc3RyaXAoKX1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgICAgICBmIiAqKlZtZXNzIEdSUEMgbGluayA6KipcbiIKICAgICAgICAgICAgICAgICAgZiIqKsK7IGB7eFsyXS5zdHJpcCgpfWBcbiIKICAgICAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgICAgIGYiKiogRXhwaXJlZCA6KiogYHtsYXRlcn1gXG4iCiAgICAgICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKiIpLAogICAgICAgIGRpc2FibGVfd2ViX3BhZ2VfcHJldmlldz1UcnVlLAogICAgICAgIHBhcnNlX21vZGU9ZW51bXMuUGFyc2VNb2RlLk1BUktET1dOCiAgICAgICAgKQogICAgICAgIApAdXNlcmdlLm9uX2NtZCgKICAgICJ0cm9qYW5fZG80IiwgYWJvdXQ9ewogICAgICAgICdoZWFkZXInOiAiQ3JlYXRlIFRST0pBTiBBY2NvdW50IiwKICAgICAgICAnZGVzY3JpcHRpb24nOiAia2VnYWJ1dGFuIHlnIGhhcWlxaSIsCiAgICAgICAgJ3VzYWdlJzogInt0cn10cm9qYW5fZG80IFt1c2VyXTpbZXhwXSJ9KQphc3luYyBkZWYgdHJvamFuKG1lc3NhZ2U6IE1lc3NhZ2UpOgogICAgIiIiVFJPSkFOIGFjY291bnQiIiIKICAgIHJlcGxpZWQgPSBtZXNzYWdlLmlucHV0X3N0ciAKICAgIGlmIG5vdCByZXBsaWVkOgogICAgICAgIGF3YWl0IG1lc3NhZ2UuZWRpdCgiYEpHTiBLT1NPTkcgQkxPSyFgIikKICAgICAgICByZXR1cm4KICAgIGlmICI6IiBub3QgaW4gcmVwbGllZDoKICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBVU0VSOkVYUCAhYCIpCiAgICAgICAgcmV0dXJuCiAgICBhd2FpdCBtZXNzYWdlLmVkaXQoImBUdW5nZ3UgQmxvZyAhYCIpCiAgICBhc3luYyB3aXRoIGFpb2h0dHAuQ2xpZW50U2Vzc2lvbigpIGFzIHJlcToKICAgICAgICB1ID0gcmVwbGllZC5zdHJpcCgpLnNwbGl0KCc6JylbMF0KICAgICAgICBwID0gcmVwbGllZC5zdHJpcCgpLnNwbGl0KCc6JylbMV0KICAgICAgICBwYXJhbSA9IGYiOjY5NjkvdHJvamFuLWNyZWF0ZT91c2VyPXt1fSZleHA9e3B9IgogICAgICAgIHVybCA9ICgiaHR0cDovL2RvNS5kZW5rYWFyYS5tZSIrcGFyYW0pCiAgICAgICAgYXN5bmMgd2l0aCByZXEuZ2V0KHVybCwgaGVhZGVycz1oZWFkZXIpIGFzIHJlc3A6CiAgICAgICAgICAgIGlmIHJlc3Auc3RhdHVzICE9ICJlcnJvciI6CiAgICAgICAgICAgICNyZXR1cm4gCiAgICAgICAgICAgICAgeHggPSBhd2FpdCByZXNwLnRleHQoKQogICAgICAgICAgICAgIHggPSB4eC5yZXBsYWNlKCJbIiwiIikucmVwbGFjZSgiXSIsIiIpLnJlcGxhY2UoIiciLAoiIikuc3BsaXQoIiwiKQogICAgICAgICAgICAjcmVtYXJrcyA9IHJlLnNlYXJjaCgiIyguKikiLHhbMF0pLmdyb3VwKDEpCiAgICAgICAgICAgIGRvbWFpbiA9IHJlLnNlYXJjaCgiQCguKj8pOiIseFswXSkuZ3JvdXAoMSkKICAgICAgICAgICAgdXVpZCA9IHJlLnNlYXJjaCgidHJvamFuOi8vKC4qPylAIix4WzBdKS5ncm91cCgxKQogICAgICAgICNwb3J0ID0gcmUuc2VhcmNoKGRvbWFpbisiOiguKj8pIix4WzBdKS5ncm91cCgxKQogICAgICAgICAgICB0b2RheSA9IERULmRhdGUudG9kYXkoKQogICAgICAgICAgICBsYXRlciA9IHRvZGF5ICsgRFQudGltZWRlbHRhKGRheXM9aW50KHApKQogICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmVkaXQoCiAgICAgICAgdGV4dD0oZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKiDin6ggVHJvamFuLXdzIOKfqSoqIFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipSZW1hcmtzOioqIGB7dX1gXG4iCiAgICAgICAgICAgICAgZiIqKkRvbWFpbjoqKiBge2RvbWFpbn1gXG4iCiAgICAgICAgICAgICAgZiIqKlVVSUQ6KiogYHt1dWlkfWBcbiIKICAgICAgICAgICAgICBmIioqUG9ydDoqKiBgNDQzYFxuIgogICAgICAgICAgICAgIGYiKipOZXR3b3JrOioqIGB3cy9ncnBjYFxuIgogICAgICAgICAgICAgIGYiKipQYXRoOioqIGAvdHJvamFuYFxuIgogICAgICAgICAgICAgIGYiKipTZXJ2aWNlTmFtZToqKiBgdHJvamFuYFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKiogVHJvamFuLXdzIFVSTDoqKlxuIgogICAgICAgICAgICAgIGYiIGB7eFswXX1gXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iCiAgICAgICAgICAgICAgZiIqKiBUcm9qYW4tZ3JwYyBVUkw6KipcbiIKICAgICAgICAgICAgICBmIiBge3hbMV19YFxuIgogICAgICAgICAgICAgIGYiKirilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIEqKlxuIgogICAgICAgICAgICAgIGYiKipFeHAgVW50aWw6KiogYHtsYXRlcn1gXG4iCiAgICAgICAgICAgICAgZiIqKuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgSoqXG4iKSwKICAgICAgICBkaXNhYmxlX3dlYl9wYWdlX3ByZXZpZXc9VHJ1ZSwKICAgICAgICBwYXJzZV9tb2RlPWVudW1zLlBhcnNlTW9kZS5NQVJLRE9XTgogICAgICAgICkKICAgICAgICAKIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSM='))
